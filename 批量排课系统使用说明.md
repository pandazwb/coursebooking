# 批量排课系统使用说明

## 🎯 系统概述

这是一个独立的Web界面批量排课系统，可以快速、便捷地进行课程批量安排。系统采用表格式界面，支持先设置好所有信息，然后批量提交排课。

## 🚀 快速开始

### 启动系统

1. 直接在浏览器中打开 `batch-schedule.html` 文件
2. 系统会自动加载课程、老师、教室等基础数据
3. 看到数据加载完成的提示后即可开始使用

### 主要功能

#### 1. 📊 数据统计
- **排课计划**：显示当前添加的排课计划总数
- **成功排课**：显示成功排课的数量
- **排课失败**：显示失败的排课数量

#### 2. 🛠️ 快速设置
在添加排课前，可以预设以下默认值：
- **日期**：选择排课日期
- **时间**：设置上课时间（格式：HH:MM）
- **时长**：选择课程时长（60/90/120分钟）
- **最大人数**：设置课程最大参与人数
- **最小人数**：设置课程最小开课人数
- **消耗课时**：设置课程消耗的课时数

#### 3. 📅 排课列表
表格式界面，包含以下字段：
- **序号**：自动生成的行号
- **日期**：课程日期
- **时间**：上课时间
- **课程**：从课程列表中选择
- **老师**：从老师列表中选择
- **教室**：从教室列表中选择
- **时长**：课程时长（分钟）
- **最大/最小**：人数限制
- **课时**：消耗的课时数
- **价格**：根据时长和人数自动计算
- **状态**：排课状态（待排课/排课中/成功/失败）
- **操作**：单独排课或删除

## 📋 使用流程

### 方式一：单条添加
```
1. 设置快速设置中的默认值
2. 点击"➕ 添加排课"按钮
3. 在新增的行中选择具体的课程、老师、教室
4. 调整其他参数（价格会自动更新）
5. 点击该行的"排课"按钮提交单条排课
```

### 方式二：批量操作
```
1. 重复上述步骤添加多条排课计划
2. 确认所有信息无误后
3. 点击"🚀 批量排课"按钮
4. 确认后系统会依次提交所有待排课的计划
```

## 💡 使用技巧

### 1. 价格自动计算
- 系统根据课程时长和最大人数自动计算价格
- 价格策略：
  - **60分钟**：135元起，人数越多价格递减，最低105元
  - **90分钟**：202元起，人数越多价格递减，最低157元
  - **120分钟**：270元起，人数越多价格递减，最低210元

### 2. 快速批量设置
- 在"快速设置"区域设置好常用的默认值
- 每次添加新行时会自动填入这些默认值
- 减少重复输入，提高效率

### 3. 状态跟踪
- **待排课**：新添加的行，等待排课
- **排课中**：正在提交到服务器
- **排课成功**：已成功排课
- **排课失败**：排课失败，可点击"重试"

### 4. 数据验证
- 系统会自动验证必填字段
- 提交前会检查日期、时间、课程、老师、教室等信息
- 不完整的数据会提示错误并跳过

## ⚙️ 系统配置

### API接口
系统使用以下API接口：
- 课程列表：`/WebApi/getlistCourse.aspx`
- 老师列表：`/WebApi/getSelectTeacher.aspx`
- 教室列表：`/WebApi/getListSite.aspx`
- 排课提交：`/WebApi/addRowClass.aspx`

### 价格策略
价格根据 `src/config/price-strategy.json` 中的配置自动计算，支持按时长和人数的阶梯定价。

## 🔧 常见问题

### Q: 数据加载失败怎么办？
A: 点击"🔄 刷新数据"按钮重新加载，或检查网络连接和token是否有效。

### Q: 排课失败怎么办？
A: 检查以下几点：
- 所选时间段教室是否已被占用
- 老师是否有时间冲突
- 课程信息是否完整
- 网络连接是否正常

### Q: 如何修改已添加的排课？
A: 直接在表格中修改对应的字段，价格会自动更新。如需删除，点击"删除"按钮。

### Q: 批量排课中断了怎么办？
A: 系统会记录每条排课的状态，已成功的不会重复提交。可以再次点击"批量排课"继续未完成的部分。

## 📱 移动端适配

系统支持移动端访问，在手机或平板上也能正常使用，界面会自动适配屏幕尺寸。

## 🆘 技术支持

如果遇到问题，请：
1. 检查浏览器控制台是否有错误信息
2. 确认API接口地址和token是否正确
3. 联系技术支持人员

---

**版本**: 1.0  
**更新日期**: 2025-06-13  
**兼容性**: 现代浏览器 (Chrome, Firefox, Safari, Edge) 